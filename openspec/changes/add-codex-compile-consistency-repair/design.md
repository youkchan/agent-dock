## コンテキスト
現行コンパイラは構文的な整合性（`target_paths` 必須、依存解決、循環検出など）は検証するが、タスク定義の不足で実行段階の手戻りが起きる余地がある。
今回の変更では、外部コマンドに依存せず、コンパイルパイプラインの内部整合性チェックを強化する。

## 目標
- OpenSpec change から生成した `task_config` の内部整合性をコンパイル時に確認する。
- 既存安全ルール（スキーマ、依存、循環、必須項目）を強化する。
- 各タスクにフェーズ担当が明示されていることをコンパイル時に保証する。

## 非目標
- タスク内容の自由生成（制約なし自動作成）
- 外部コマンドによる自動補正
- OpenSpec change 文書そのものの自動書換え

## 設計判断

### 1) 適用フロー
1. 既存コンパイル（parse + override + static validate）
   - static validate で「各タスクに `phase_overrides` が1つ以上あること」を必須化する
2. payload に static validate を再適用
3. 成功時のみ出力

検証を通らない場合は fail-closed（エラーで停止）とする。

## リスクと緩和
- リスク: タスク定義不足が実行時に顕在化する
  - 緩和: `phase_overrides` 必須化と compile 時 fail-closed
- リスク: 依存関係の取り違え
  - 緩和: 依存未解決・循環依存の静的検証を厳格化
